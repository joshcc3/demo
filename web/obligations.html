<!DOCTYPE html>
<html>
<head>
    <title>RFQ Obligations</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="js/jquery-1.4.2.js"></script>
    <script src="js/jquery-extras.js"></script>
    <script src="js/websocket.js"></script>
    <script src="js/websocket-ui.js"></script>
    <script src="js/error-catcher.js"></script>
    <script src="launcher.js"></script>
    <style>
    </style>
    <script type="text/javascript">
        var Contracts = {};

        $(function () {
            ws = connect();
            ws.logToConsole = false;
            ws.onmessage = function (x) {
                eval(x);
            };
        });


        function addContract(symbol) {
            if (!Contracts.hasOwnProperty(symbol)) {
                var row = $("#obligations").find('tr.template').clone().removeClass('template');
                Contracts[symbol] = row;
                row.find('.symbol')
                    .text(symbol)
                    .bind('click', function () {
                        launchLadder(symbol)
                    });
                row.data('symbol', symbol);
                $('#spreadTable').addSorted(row, function (a, b) {
                    a = $(a);
                    b = $(b);
                    return a.data('symbol') < b.data('symbol') ? -1 : a.data('symbol') == b.data('symbol') ? 0 : 1;
                });
            }
        }

        function update(symbol, bpsTop, eurTop, bpsMax, eurMax) {
            if (!Contracts[symbol]) {
                return;
            }
            var row = Contracts[symbol];
            row.find('.bpsTop').text(bpsTop);
            row.find('.eurTop').text(eurTop);
            row.find('.bpsMax').text(bpsMax);
            row.find('.eurMax').text(eurMax);
        }

    </script>
</head>
<body>
<table>
    <thead>
    <tr class="header_row">
        <th>
            <button class="toggleOK">OK</button>
            <button class="toggleFake">Fake</button>
        </th>
        <th>Oblig Bps</th>
        <th>Oblig Qty</th>
        <th>Showing Bps</th>
        <th>Showing Oblig Qty</th>
    </tr>
    </thead>
    <tbody id="obligations">
    <tr class="template">
        <td class="symbol"></td>
        <td class="bpsTop bps"></td>
        <td class="eurTop"></td>
        <td class="bpsMax bps"></td>
        <td class="eurMax"></td>
    </tr>
    </tbody>
</table>
</body>
</html>
